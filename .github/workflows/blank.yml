name: CI/CD for QA Project

on:
 push:
   branches:
     - main

jobs:
 run-tests:
   runs-on: ubuntu-latest

   steps:
   - name: Checkout code
     uses: actions/checkout@v2

   - name: Install Node.js
     uses: actions/setup-node@v2
     with:
       node-version: '14'

   - name: Install Newman
     run: npm install -g newman

   - name: Run Newman Tests
     run: |
       newman run Regression_TestSuite_GB_003.json -e prod.postman_environment.json -r json --reporter-json-export newman-results.json

   - name: Run generate-csv.js
     run: |
       node generate-csv.js

   - name: Upload Results
     uses: actions/upload-artifact@v2
     with:
       name: summary-results
       path: summary_results.csv
